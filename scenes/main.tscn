[gd_scene load_steps=19 format=4 uid="uid://opwn7fy3rv4o"]

[ext_resource type="Script" uid="uid://ccvxggkx8ogay" path="res://scripts/main.gd" id="1_o5qli"]
[ext_resource type="TileSet" uid="uid://dbbdwd3x3xwi6" path="res://assets/tres/tileset.tres" id="2_tipki"]
[ext_resource type="PackedScene" uid="uid://carejpbcf6jys" path="res://scenes/actors/player.tscn" id="3_sugp2"]
[ext_resource type="Script" uid="uid://mi21lm1oodbi" path="res://scripts/camera.gd" id="4_jyhfs"]
[ext_resource type="Script" uid="uid://dvd7syn8vmecr" path="res://scripts/water.gd" id="5_tbgi4"]
[ext_resource type="Script" uid="uid://bmmcgyx87kt4x" path="res://scripts/ui.gd" id="6_o6xl0"]
[ext_resource type="Shader" uid="uid://bfbwpnx848omh" path="res://assets/shaders/fade.gdshader" id="6_tefeu"]
[ext_resource type="Texture2D" uid="uid://d1drbob3ivb2f" path="res://assets/textures/water.png" id="7_85g3d"]
[ext_resource type="PackedScene" uid="uid://d0c6y0y3yu4xv" path="res://scenes/actors/walking_enemy.tscn" id="8_tipki"]
[ext_resource type="PackedScene" uid="uid://bsjwsyj2in8of" path="res://scenes/rain.tscn" id="9_a8y0u"]
[ext_resource type="Script" uid="uid://nj8qg31swxhn" path="res://scripts/fade_overlay.gd" id="10_choun"]
[ext_resource type="Shader" uid="uid://bbn734ijtgab3" path="res://assets/shaders/bluescale.gdshader" id="11_ya4ey"]

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_85g3d"]
load_path = "res://.godot/imported/water.png-f21c23d7964344de93bfec34a6ac1079.ctex"

[sub_resource type="AtlasTexture" id="AtlasTexture_ya4ey"]
atlas = SubResource("CompressedTexture2D_85g3d")
region = Rect2(0, 256, 256, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_choun"]
atlas = ExtResource("7_85g3d")
region = Rect2(0, 0, 256, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_jkv2x"]
atlas = ExtResource("7_85g3d")
region = Rect2(0, 0, 64, 64)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_o6xl0"]
shader = ExtResource("6_tefeu")
shader_parameter/progress = -0.01

[sub_resource type="ShaderMaterial" id="ShaderMaterial_eb6dy"]
shader = ExtResource("11_ya4ey")
shader_parameter/red_dist = 0.39
shader_parameter/dismalization = 0.465

[node name="Main" type="Node" node_paths=PackedStringArray("player")]
script = ExtResource("1_o5qli")
player = NodePath("World/Player")

[node name="World" type="Node2D" parent="."]

[node name="Environment" type="TileMapLayer" parent="World"]
texture_filter = 1
rotation = 0.00545141
tile_map_data = PackedByteArray("AAAPAAUAAAAAAAAAAgAPAAQAAAAAAAEAAAAPAAMAAAAAAAEAAAAPAAIAAAABAAIAAAAPAAEAAAAAAAIAAAAOAAUAAAAAAAAAAgAOAAQAAAAAAAEAAAAOAAMAAAABAAIAAAAOAAIAAAAAAAIAAAAOAAEAAAAAAAIAAAANAAUAAAAAAAAAAgANAAQAAAAAAAIAAAANAAMAAAAAAAIAAAANAAIAAAABAAIAAAANAAEAAAAAAAIAAAAMAAUAAAAAAAAAAgAMAAQAAAAAAAEAAAAMAAMAAAABAAIAAAAMAAIAAAAAAAEAAAAMAAEAAAAAAAIAAAALAAUAAAAAAAAAAgALAAQAAAABAAIAAAALAAMAAAAAAAIAAAALAAIAAAABAAIAAAALAAEAAAAAAAIAAAAKAAUAAAAAAAAAAgAKAAQAAAABAAIAAAAKAAMAAAABAAIAAAAKAAIAAAAAAAEAAAAKAAEAAAAAAAIAAAAJAAUAAAAAAAAAAgAJAAQAAAAAAAEAAAAJAAMAAAABAAIAAAAJAAIAAAAAAAEAAAAJAAEAAAABAAIAAAAIAAUAAAAAAAAAAgAIAAQAAAAAAAEAAAAIAAMAAAABAAIAAAAIAAIAAAABAAIAAAAIAAEAAAAAAAIAAAAHAAUAAAAAAAAAAgAHAAQAAAABAAIAAAAHAAMAAAABAAIAAAAHAAIAAAABAAIAAAAGAAUAAAAAAAAAAgAGAAQAAAABAAIAAAAGAAMAAAABAAIAAAAGAAIAAAABAAIAAAAFAAUAAAAAAAAAAgAFAAQAAAAAAAEAAAAFAAMAAAAAAAEAAAAFAAIAAAAAAAIAAAAEAAUAAAAAAAAAAgAEAAQAAAAAAAIAAAAEAAMAAAAAAAEAAAAEAAIAAAABAAIAAAADAAUAAAAAAAAAAgADAAQAAAAAAAIAAAADAAMAAAAAAAEAAAADAAIAAAABAAIAAAADAAEAAAAAAAEAAAACAAUAAAAAAAAAAgACAAQAAAAAAAEAAAACAAMAAAAAAAIAAAACAAIAAAAAAAIAAAACAAEAAAAAAAEAAAABAAUAAAAAAAAAAgABAAQAAAABAAIAAAABAAMAAAABAAIAAAABAAIAAAAAAAEAAAABAAEAAAAAAAIAAAAAAAUAAAAAAAAAAgAAAAQAAAABAAIAAAAAAAMAAAABAAIAAAAAAAIAAAAAAAEAAAAAAAEAAAAAAAIAAAD//wUAAAAAAAAAAgD//wQAAAABAAIAAAD//wMAAAAAAAIAAAD//wIAAAAAAAIAAAD//wEAAAABAAIAAAD+/wUAAAAAAAAAAgD+/wQAAAAAAAIAAAD+/wMAAAAAAAEAAAD+/wIAAAAAAAEAAAD+/wEAAAABAAIAAAD9/wUAAAAAAAAAAgD9/wQAAAAAAAIAAAD9/wMAAAAAAAIAAAD9/wIAAAAAAAEAAAD9/wEAAAAAAAEAAAD8/wUAAAAAAAAAAgD8/wQAAAAAAAEAAAD8/wMAAAAAAAEAAAD8/wIAAAAAAAEAAAD8/wEAAAAAAAEAAAD7/wUAAAAAAAAAAgD7/wQAAAAAAAEAAAD7/wMAAAAAAAIAAAD7/wIAAAAAAAEAAAD7/wEAAAAAAAIAAAD6/wUAAAAAAAAAAgD6/wQAAAABAAIAAAD6/wMAAAAAAAEAAAD6/wIAAAAAAAEAAAD6/wEAAAABAAIAAAD5/wUAAAAAAAAAAgD5/wQAAAAAAAIAAAD5/wMAAAAAAAEAAAD5/wIAAAAAAAEAAAD5/wEAAAAAAAEAAAD4/wUAAAAAAAAAAgD4/wQAAAAAAAIAAAD4/wMAAAAAAAIAAAD4/wIAAAAAAAEAAAD4/wEAAAABAAIAAAD3/wUAAAAAAAAAAgD3/wQAAAAAAAEAAAD3/wMAAAABAAIAAAD3/wIAAAABAAIAAAD3/wEAAAABAAIAAAD2/wUAAAAAAAAAAgD2/wQAAAAAAAIAAAD2/wMAAAABAAIAAAD2/wIAAAABAAIAAAD2/wEAAAAAAAIAAAD1/wUAAAAAAAAAAgD1/wQAAAAAAAEAAAD1/wMAAAAAAAEAAAD1/wIAAAAAAAEAAAD1/wEAAAAAAAEAAAD0/wUAAAAAAAAAAgD0/wQAAAAAAAEAAAD0/wMAAAAAAAEAAAD0/wIAAAAAAAEAAAD0/wEAAAAAAAEAAADz/wUAAAAAAAAAAgDz/wQAAAAAAAEAAADz/wMAAAAAAAEAAADz/wIAAAAAAAEAAADz/wEAAAAAAAEAAADy/wUAAAAAAAAAAgDy/wQAAAAAAAEAAADy/wMAAAAAAAEAAADy/wIAAAAAAAEAAADy/wEAAAAAAAEAAADx/wUAAAAAAAAAAgDx/wQAAAAAAAEAAADx/wMAAAAAAAEAAADx/wIAAAAAAAEAAADx/wEAAAAAAAEAAADw/wUAAAAAAAAAAgDw/wQAAAAAAAEAAADw/wMAAAAAAAEAAADw/wIAAAAAAAEAAADw/wEAAAAAAAEAAADv/wUAAAAAAAAAAgDv/wQAAAAAAAEAAADv/wMAAAAAAAEAAADv/wIAAAAAAAEAAADv/wEAAAAAAAEAAAASAAUAAAAAAAAAAgASAAQAAAABAAIAAAASAAMAAAAAAAIAAAASAAIAAAAAAAEAAAASAAEAAAABAAIAAAASAAAAAAABAAIAAAARAAUAAAAAAAAAAgARAAQAAAABAAIAAAARAAMAAAABAAIAAAARAAIAAAABAAIAAAARAAEAAAAAAAIAAAARAAAAAAAAAAEAAAAQAAUAAAAAAAAAAgAQAAQAAAABAAIAAAAQAAMAAAAAAAIAAAAQAAIAAAAAAAEAAAAQAAEAAAAAAAEAAAAQAAAAAAABAAIAAAAPAAAAAAAAAAIAAAAOAAAAAAAAAAIAAAANAAAAAAAAAAEAAAAMAAAAAAAAAAIAAAALAAAAAAAAAAIAAAAKAAAAAAAAAAEAAAAJAAAAAAAAAAEAAAAIAAAAAAABAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//wAAAAAAAAAAAAD+/wAAAAAAAAAAAAD9/wAAAAAAAAAAAAD8/wAAAAAAAAAAAAD7/wAAAAAAAAAAAAD6/wAAAAAAAAAAAAD5/wAAAAAAAAAAAAD4/wAAAAAAAAAAAAD3/wAAAAAAAAAAAAD2/wAAAAAAAAAAAAD1/wAAAAAAAAAAAAD0/wAAAAABAAEAAADz/wAAAAAAAAEAAADy/wAAAAAAAAEAAADx/wAAAAAAAAEAAADw/wAAAAABAAEAAwDv/wAAAAAAAAAAAADu/wUAAAABAAAAAgDu/wQAAAAAAAAAAwDu/wMAAAAAAAAAAwDu/wIAAAAAAAAAAwDu/wEAAAAAAAAAAwDu/wAAAAABAAAAAwASAP//AAAAAAEAAAASAP7/AAAAAAIAAAASAP3/AAAAAAIAAAASAPz/AAAAAAIAAAARAP//AAAAAAEAAAARAP7/AAAAAAEAAAARAP3/AAAAAAIAAAARAPz/AAABAAEAAwAQAP//AAAAAAIAAAAQAP7/AAABAAIAAAAQAP3/AAABAAIAAAAQAPz/AAAAAAAAAAAPAP//AAABAAIAAAAPAP7/AAAAAAIAAAAPAP3/AAABAAIAAAAPAPz/AAAAAAAAAAAOAP//AAAAAAIAAAAOAP7/AAAAAAEAAAAOAP3/AAAAAAIAAAAOAPz/AAAAAAAAAAANAP//AAAAAAIAAAANAP7/AAAAAAIAAAANAP3/AAABAAIAAAANAPz/AAAAAAAAAAAMAP//AAAAAAEAAAAMAP7/AAAAAAEAAAAMAP3/AAABAAIAAAAMAPz/AAAAAAAAAAALAP//AAAAAAEAAAALAP7/AAABAAIAAAALAP3/AAAAAAIAAAALAPz/AAAAAAAAAAAKAP//AAAAAAIAAAAKAP7/AAAAAAEAAAAKAP3/AAAAAAEAAAAKAPz/AAAAAAAAAAAJAP//AAAAAAIAAAAJAP7/AAABAAIAAAAJAP3/AAABAAIAAAAJAPz/AAAAAAAAAAAIAP//AAAAAAEAAAAIAP7/AAAAAAIAAAAIAP3/AAAAAAEAAAAIAPz/AAAAAAAAAAAHAP//AAAAAAAAAwAHAP7/AAAAAAAAAwAHAP3/AAAAAAAAAwAHAPz/AAABAAAAAwAHAAEAAAABAAIAAAAHAAAAAAABAAEAAwAGAAEAAAAAAAEAAAAGAAAAAAAAAAAAAAAFAAEAAAAAAAEAAAAFAAAAAAAAAAAAAAAEAAEAAAABAAIAAAAEAAAAAAAAAAAAAAD0////AAAAAAAAAQD0//7/AAAAAAAAAQD0//3/AAAAAAAAAQD0//z/AAABAAAAAADz////AAAAAAEAAADz//7/AAAAAAEAAADz//3/AAAAAAEAAADz//z/AAABAAEAAADy////AAAAAAEAAADy//7/AAAAAAEAAADy//3/AAAAAAEAAADy//z/AAABAAEAAwDx////AAAAAAEAAADx//7/AAAAAAEAAADx//3/AAAAAAEAAADx//z/AAAAAAAAAADw////AAAAAAAAAwDw//7/AAAAAAAAAwDw//3/AAAAAAAAAwDw//z/AAABAAAAAwAVAAAAAAAAAAAAAQAVAP//AAAAAAAAAQAVAP7/AAAAAAAAAQAVAP3/AAAAAAAAAQAVAPz/AAAAAAAAAQAVAPv/AAAAAAAAAQAVAPr/AAAAAAAAAQAVAPn/AAAAAAAAAQAVAPj/AAABAAAAAAAUAAAAAAAAAAIAAAAUAP//AAAAAAIAAAAUAP7/AAAAAAEAAAAUAP3/AAABAAIAAAAUAPz/AAAAAAIAAAAUAPv/AAAAAAEAAAAUAPr/AAAAAAEAAAAUAPn/AAAAAAEAAAAUAPj/AAAAAAAAAAATAAAAAAAAAAIAAAATAP//AAAAAAEAAAATAP7/AAABAAIAAAATAP3/AAAAAAIAAAATAPz/AAAAAAIAAAATAPv/AAAAAAEAAAATAPr/AAAAAAEAAAATAPn/AAAAAAEAAAATAPj/AAAAAAAAAAASAPv/AAAAAAEAAAASAPr/AAAAAAEAAAASAPn/AAAAAAEAAAASAPj/AAAAAAAAAAARAPv/AAAAAAAAAwARAPr/AAAAAAAAAwARAPn/AAAAAAAAAwARAPj/AAABAAAAAwAVAAUAAAABAAAAAQAVAAQAAAAAAAAAAQAVAAMAAAAAAAAAAQAVAAIAAAAAAAAAAQAVAAEAAAAAAAAAAQAUAAUAAAAAAAAAAgAUAAQAAAABAAIAAAAUAAMAAAABAAIAAAAUAAIAAAAAAAEAAAAUAAEAAAAAAAIAAAATAAUAAAAAAAAAAgATAAQAAAABAAIAAAATAAMAAAAAAAEAAAATAAIAAAAAAAIAAAATAAEAAAAAAAIAAADz//v/AAAAAAAAAQDz//r/AAABAAAAAADy//v/AAAAAAAAAwDy//r/AAABAAAAAwAHAPj/AAABAAAAAQAHAPf/AAAAAAAAAQAHAPb/AAAAAAAAAQAHAPX/AAAAAAAAAQAHAPT/AAABAAAAAAAGAPj/AAAAAAAAAgAGAPf/AAAAAAIAAAAGAPb/AAAAAAEAAAAGAPX/AAAAAAIAAAAGAPT/AAAAAAAAAAAFAPj/AAAAAAAAAgAFAPf/AAAAAAIAAAAFAPb/AAABAAIAAAAFAPX/AAABAAIAAAAFAPT/AAAAAAAAAAAEAPj/AAAAAAAAAgAEAPf/AAAAAAIAAAAEAPb/AAAAAAEAAAAEAPX/AAAAAAEAAAAEAPT/AAAAAAAAAAADAPr/AAABAAAAAQADAPn/AAAAAAAAAQADAPj/AAABAAEAAQADAPf/AAAAAAIAAAADAPb/AAAAAAEAAAADAPX/AAABAAIAAAADAPT/AAAAAAAAAAACAPr/AAAAAAAAAgACAPn/AAAAAAIAAAACAPj/AAAAAAEAAAACAPf/AAAAAAEAAAACAPb/AAAAAAEAAAACAPX/AAABAAIAAAACAPT/AAAAAAAAAAABAPr/AAAAAAAAAgABAPn/AAAAAAEAAAABAPj/AAAAAAEAAAABAPf/AAAAAAIAAAABAPb/AAAAAAIAAAABAPX/AAAAAAIAAAABAPT/AAAAAAAAAAAAAPr/AAAAAAAAAgAAAPn/AAAAAAEAAAAAAPj/AAABAAIAAAAAAPf/AAAAAAIAAAAAAPb/AAAAAAIAAAAAAPX/AAAAAAIAAAAAAPT/AAAAAAAAAAD///r/AAAAAAAAAgD///n/AAAAAAEAAAD///j/AAABAAIAAAD///f/AAAAAAEAAAD///b/AAAAAAIAAAD///X/AAABAAIAAAD///T/AAAAAAAAAAD+//r/AAAAAAAAAgD+//n/AAAAAAIAAAD+//j/AAAAAAIAAAD+//f/AAAAAAIAAAD+//b/AAAAAAIAAAD+//X/AAAAAAEAAAD+//T/AAAAAAAAAAD9//r/AAAAAAAAAgD9//n/AAAAAAIAAAD9//j/AAAAAAEAAAD9//f/AAABAAIAAAD9//b/AAABAAIAAAD9//X/AAAAAAEAAAD9//T/AAAAAAAAAAD8//r/AAAAAAAAAgD8//n/AAABAAIAAAD8//j/AAAAAAIAAAD8//f/AAAAAAEAAAD8//b/AAAAAAIAAAD8//X/AAABAAIAAAD8//T/AAAAAAAAAAD7//r/AAAAAAAAAgD7//n/AAABAAIAAAD7//j/AAAAAAIAAAD7//f/AAAAAAIAAAD7//b/AAABAAIAAAD7//X/AAAAAAEAAAD7//T/AAAAAAAAAAD6//r/AAAAAAAAAgD6//n/AAAAAAEAAAD6//j/AAAAAAEAAAD6//f/AAABAAIAAAD6//b/AAAAAAEAAAD6//X/AAAAAAEAAAD6//T/AAAAAAAAAAD5//r/AAABAAAAAgD5//n/AAAAAAAAAwD5//j/AAAAAAAAAwD5//f/AAAAAAAAAwD5//b/AAAAAAAAAwD5//X/AAAAAAAAAwD5//T/AAABAAAAAwA=")
tile_set = ExtResource("2_tipki")

[node name="Player" parent="World" instance=ExtResource("3_sugp2")]
position = Vector2(-476, -135)

[node name="Camera2D" type="Camera2D" parent="World" node_paths=PackedStringArray("player") groups=["Camera"]]
position = Vector2(-470, -131)
zoom = Vector2(0.175, 0.175)
script = ExtResource("4_jyhfs")
player = NodePath("../Player")
day_start_zoom = Vector2(0.17, 0.17)
follow_ahead = Vector2(0.3, 0.1)

[node name="WalkingEnemy" parent="World" instance=ExtResource("8_tipki")]
position = Vector2(1654, -631)

[node name="Parallax2D" type="Parallax2D" parent="World" node_paths=PackedStringArray("camera")]
modulate = Color(1, 1, 1, 0)
z_index = 2
scroll_scale = Vector2(0.9, 1)
repeat_size = Vector2(256, 0)
autoscroll = Vector2(100, 0)
repeat_times = 50
script = ExtResource("5_tbgi4")
camera = NodePath("../Camera2D")
layer_texture = SubResource("AtlasTexture_ya4ey")

[node name="Sprite2D" type="Sprite2D" parent="World/Parallax2D"]
texture = SubResource("AtlasTexture_choun")

[node name="Sprite2D2" type="Sprite2D" parent="World/Parallax2D"]
z_index = 2
position = Vector2(0, 6656)
texture = SubResource("AtlasTexture_ya4ey")

[node name="Rain" parent="World" node_paths=PackedStringArray("rain_blocks") instance=ExtResource("9_a8y0u")]
z_index = -1
particle_count = 400
particle_velocity = Vector2(-40, 100)
rain_atlas = SubResource("AtlasTexture_jkv2x")
rain_blocks = [NodePath("")]
particle_scale_range = Vector2(0.2, 0.4)

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="UI" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("6_o6xl0")

[node name="DayFadeOverlay" type="ColorRect" parent="CanvasLayer/UI"]
material = SubResource("ShaderMaterial_o6xl0")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)
script = ExtResource("10_choun")
START_TIME = 1.5
FADE_TIME = 3.0
PAUSE_TIME = 1.5

[node name="DeathFadeOverlay" type="ColorRect" parent="CanvasLayer/UI"]
material = SubResource("ShaderMaterial_o6xl0")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)
script = ExtResource("10_choun")
START_TIME = 1.5
FADE_TIME = 6.0
PAUSE_TIME = 1.5

[node name="ColorRect" type="ColorRect" parent="CanvasLayer/UI"]
visible = false
material = SubResource("ShaderMaterial_eb6dy")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -2159.0
offset_top = -1798.0
offset_right = 1186.0
offset_bottom = 424.0
grow_horizontal = 2
grow_vertical = 2

[node name="Sound" type="Node" parent="."]
